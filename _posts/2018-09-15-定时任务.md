

**例行工作分单一工作和循环工作，排程就是将工作安排执行的流程**

linux工作排程的种类：at   cron

at：是一个可以处理仅执行一次就结束排程的 指令，atd服务

crontab：crontab所设定的工作将会循环的一直进行下去，crond服务


at的运作方式：用at指令来产生索要运行的工作，并将这个工作以文本文件的方式写入/var/spool/at/目录，然后只需要atd服务的取用与执行了。

并不是谁都能使用at这个命令，如何达到at的列管呢？？？

/etc/at.allow和/etc/at.deny

先去寻找/etc/at.allow文件，除了文件内的用户能使用at命令，其他的都不能使用

如果上面文件不存在，则去寻找/etc/at.deny文件，写在/etc/at.deny的用户不能使用at命令，其他的都能使用at

如果两个文件都不存在，只有root才能使用at

实际运作单一工作排程：at shell环境下最好使用绝对路径

​	at [-mldv] TIME

-m：at的工作完成之后，没有信息也要发送mail提示工作已完成

-l：列出母亲啊系统上面的所有该用户的排程

-d：取消一个在at排程中的工作

-v：显现工作列表

-c：可以列出后面接的工作的实际指令内容

​	at -c 工作号码

atq：查看工作排程

atrm： 工作号码

事实上，当我们使用 at 时会进入一个 at shell 的环境来让使用者下达工作命令，此时，建议你最好使用绝对路径来下达你的命令，比较不会有问题喔！由於命令的下达与 PATH 变量有关， 同时与当时的工作目录也有关连 (如果有牵涉到文件的话)，因此使用绝对路径来下达命令，会是比较一劳永逸的方法。 为什么呢？举例来说，你在 /tmp 下达『 at now 』然后输入『 mail root -s "test" < .bashrc 』， 问一下，那个 .bashrc 的文件会是在哪里？答案是『 /tmp/.bashrc 』！因为 at 在运行时，会跑到当时下达 at 命令的那个工作目录的缘故啊。

系统有空时才进行背景任务 **batch**

​	batch只有在系统空闲的时候（一般是负载小于0.8的时候）才会进行背景任务，否则一直在后台等待执行

​	update可以查看cpu 1，5 ，15分钟的平均负载信息

​	直接执行batch就可以使用

循环执行的例行性工作排程：

由cron（crond）这个系统服务来控制的，指令是**crontab**

使用者的设定与at一样 /etc/cron.allow /etc/cron.deny 工作会被记录到/var/spool/cron中，cron执行的每一项工作都会被记录到/var/log/cron中，当你的系统被攻击时可以查看。

​	crontab [-u username ][-l &#124;-e &#124;-r]

​		-u：只有root才能进行这个任务，亦即帮助其他使用者建立/移除工作排程

​		-l：查看

​		-e：编辑，删除一项也用这个

​		-r：删除所有排程工作

​	格式： 分 时 日 月 周 指令

​	0 3,6 * * * command  ：要下达的工作是3：00与6：00

​	20 8-12 * * * command ：8点到12点之间的每小时的20分都进行一项工作

​	*/5 * * * * command ：/n是指每隔n单位间隔，每五分钟进行一次

**注意多时间的时候会小时间会覆盖大的时间**。

固定每小时每日每周每天执行的特别工作：如果与系统维护有关，还是建议放置到/etc/crontab集中管理

可唤醒停机期间的工作排程：

​	anacron 主动帮你进行时间到了但却没有执行的排程 /etc/anacrontab

​	anacron这个程序已经进入crontab排程了，

​	默认例行性命令都放置在/etc/cron.*    /etc/cron.daily/        /etc/cron.week/           /etc/cron.monthly/




​	